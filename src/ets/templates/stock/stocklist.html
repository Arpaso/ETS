{% extends "base_template.html" %}
{% load i18n pagination_tags %}

{% block title %}{% trans "Stock items" %}{% endblock %}

{% block content %}
<h3>{% trans "Stock List" %}</h3>
{% for wh in object_list %}
<p>{% trans "Location" %}: <strong>{{ wh.location.name }}</strong>, {% trans "Warehouse" %}: <strong>{{ wh.name }} ({{ wh.pk }})</strong></p>
<table cellpadding="0" cellspacing="0" border="0" class="stocklist display">
  <thead>
    <tr>
      <th>{% trans "Commodity" %}</th>
      <th>{% trans "Project Number" %}</th>
      <th>{% trans "SI" %}</th>
      <th>{% trans "State" %}</th>
      <th>{% trans "Units" %}</th>
      <th>{% trans "Unit Net Weight (kg)" %}</th>
      <th>{% trans "Unit Gross Weight (kg)"%}</th>
      <th>{% trans "Net Tonnage"%}</th>
      <th>{% trans "Gross Tonnage"%}</th>
      
    </tr>
  </thead>
  <tbody>
    {% for item in wh.stock_items.all %}
    <tr style="{% if item.quality != item.GOOD_QUALITY %}color:red;{% endif %}{% if item.number_of_units <= 0 %}opacity:0.2;{% endif %}" >
      <td>{{ item.commodity }}</td>
      <td>{{ item.project_number }}</td>
      <td>{{ item.si_code }}</td>
      <td>{{ item.get_quality_display }}</td>
      <td>{{ item.number_of_units|floatformat:0 }}</td>
      <td>{{ item.unit_weight_net }}</td>
      <td>{{ item.unit_weight_gross }}</td>
      <td>{{ item.calculate_total_net|floatformat:3 }}</td>      
      <td>{{ item.calculate_total_gross|floatformat:3 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% if not forloop.last %}<div class="sep"></div>{% endif %}
{% endfor %}

{% paginate %}
{% endblock %}

{% block script %}
{{ block.super }}
<script charset="utf-8">
  $(document).ready(function() {
    $('.stocklist').dataTable();
  });
</script>
{% endblock script %}
