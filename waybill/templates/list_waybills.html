{% extends "base_template.html"%}
{%block content %}
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    	<thead>
        <tr><th>LTI</th><th>Waybill Number</th><th>Origin</th><th>Consignee</th><th>Delivery Location</th><th>Dispatch</th> <th>Received</th>
{%if profile.superUser or profile.readerUser or profile.isCompasUser%}        
        <th>Validated</th><th>In Compas</th>
{%endif%}
        <th>Action</th>
        </tr>
        </thead>
{% for waybill in waybill_list%}
{%if waybill.id in my_wb%}

<tr>
 			<td>{{waybill.ltiNumber}}</td>
 			<td>{{waybill.waybillNumber}}</td>
 			<td>{{waybill.loadingdetail_set.select_related.0.siNo.ORIGIN_LOC_NAME}}</td>
 			<td>{{waybill.loadingdetail_set.select_related.0.siNo.CONSEGNEE_NAME}}</td>
 			<td>{{waybill.loadingdetail_set.select_related.0.siNo.DESTINATION_LOC_NAME}}</td>
			<td>{%if waybill.dispatcherSigned%}{%else%}Pending{%endif%}{{waybill.transportDispachSignedTimestamp|date:"d/m/Y"}}</td>
  			<td>{%if waybill.recipientSigned%}{%else%}Pending{%endif%} {{waybill.recipientSignedTimestamp|date:"d/m/Y"}}</td>
{%if profile.superUser or profile.readerUser or profile.isCompasUser%} 
 			<td>{%if waybill.waybillValidated%}D{%else%}-{%endif%}/{%if waybill.waybillReceiptValidated%}R{%else%}-{%endif%}</td>
 			<td>{%if waybill.waybillSentToCompas%}D{%else%}-{%endif%}/{%if waybill.waybillRecSentToCompas%}R{%else%}-{%endif%}</td>
{%endif%}
 			<td>{%if not profile.superUser%}<a href='{%if  profile.isDispatcher%}{%url ets.waybill.views.waybill_view waybill.id%}{%else%}{%url ets.waybill.views.waybill_view_reception waybill.id%}{%endif%}'>View WB</a>{%endif%}
 			{%if profile.superUser%} <a href='{%url ets.waybill.views.waybill_validate_form_update waybill.id%}'>Edit</a>{%endif%}
 			</td>
    </tr>
{%endif%}
{% endfor%}
</table>

{%endblock%}

{%block extra-header%}
<script charset="utf-8">
$(document).ready(function() {
				$('#example').dataTable( {});
} );
</script>
{%endblock extra-header%}