{% extends "base_template.html"%}
{%block title %}Waybill Creation{%endblock%}
{%block content %}
<style type="text/css">
.ul-inline ul, .ul-inline ul li{border-width: 1px; display: inline; padding: 0px;}
.ul-inline{margin: 2px; border-color: black; border-style: none; border-width: 1px;}
</style>
<form action="" method=POST id="delform">
{% for hidden in form.hidden_fields %}
{{ hidden }}
{% endfor %}
{%for item in form%}
	{% if item.errors %}
    <ol>
	    {% for error in item.errors %}
	        <li>{{item.label}} <strong>{{ error|escape }}</strong></li>
	    {% endfor %}
    </ol>
	{% endif %}
{% endfor %}
<div class="form">
	<div>
		<span><strong>LTI:</strong> {{lti_list.0.CODE}}</span>
	</div>
	<div>
		<strong>Waybill Number:</strong> {{form.instance.waybillNumber}}
	</div>
	<div>
<br>
	<span>
	<table>
		<tr>
			<td>Dispatch Signed:</td>
			<td>{{form.dispatcherSigned}}</td>
		</tr>
		<tr>
			<td>Dispatch Validated:</td>
			<td>{{form.waybillValidated}}</td>
		</tr>
		<tr>
			<td>Dispatch In Compas:</td>
			<td>{{form.waybillSentToCompas}}</td>
		</tr>
		<tr>
			<td>Receipt Signed:</td>
			<td>{{form.recipientSigned}}</td>
		</tr>
		<tr>
			<td>Receipt Validated:</td>
			<td>{{form.waybillReceiptValidated}}</td>
		</tr>
		<tr>
			<td>Receipt In Compas:</td>
			<td>{{form.waybillRecSentToCompas}}</td>
		</tr>
		
	</table>
	<br>
	</span>
		<span><strong>Date of Loading:</strong> {{form.dateOfLoading}}</span>
		<span><strong>Date of Dispatch: </strong>{{form.dateOfDispatch}}</span>
	</div>
<table>
		<tr>
			<th>Transaction Type:</th>
			<td> {{form.transactionType}}</td>
			<td>&nbsp;</td>
			<th>Transport Type:</th>
			<td> {{form.transportType}}</td>
		</tr>
	</table>
<strong>Destination Location:</strong>   {{form.instance.recipientLocation}}  <br>
<strong>Destination Warehouse<strong> {{form.destinationWarehouse}}
<br>
<br>
 {{ formset.management_form }}
 <table cellpadding="1" cellspacing="0" border="1" class="x" id="example">
    <thead>
        <tr><th>Item</th><th>Dispatched</th><th>Good</th><th>Damaged</th><th>Lost</th>
        </thead>
    {% for sform in formset.forms %}
        <tr>
        	<td>{{ sform.id }}{{sform.siNo}}</td>
        	<td align="right">{{ sform.numberUnitsLoaded }}</td>
        	<td>{{ sform.numberUnitsGood }}</td>
        	<td>{{ sform.numberUnitsDamaged }} Type: {{ sform.unitsDamagedType }} Reason:{{ sform.unitsDamagedReason }}</td>
        	<td>{{ sform.numberUnitsLost }} Type:{{ sform.unitsLostType }} Reason:{{ sform.unitsLostReason }}</td>

        </tr>
    {% endfor %}
</table>
<div>
 <br>
<div>
<div><strong>Dispatch Remarks:</strong> {{form.dispatchRemarks}}
<div><strong>Dispatcher Name:</strong>{{form.thisDispName}} - {{form.instance.dispatcherTitle}}</div>
<br>
<div><table>
<tr><td><strong>Transport Contractor:</strong></td><td>{{lti_list.0.TRANSPORT_NAME}}</td></tr>
<tr><td><strong>Transport Subcontractor:</strong></td><td>{{form.transportSubContractor}}</td></tr>
<tr><td><strong>Driver's Name:</strong></td><td>{{form.transportDriverName}}</td></tr>
<tr><td><strong>Driver's Licens No:</strong></td><td>{{form.transportDriverLicenceID}}</td></tr>
<tr><td><strong>Vehicle Registration No:</strong></td><td>{{form.transportVehicleRegistration}}</td></tr>
<tr><td><strong>Trailer Registration No:</strong></td><td>{{form.transportTrailerRegistration}}</td></tr>
</table>
</div>
<br>
<strong>Container 1: Number:</strong>{{form.containerOneNumber}}<strong> Seal:</strong>{{form.containerOneSealNumber}}<strong> Remarks:</strong>{{form.containerOneRemarksDispatch}}<br>
<strong>Container 2: Number:</strong>{{form.containerTwoNumber}}<strong> Seal:</strong>{{form.containerTwoSealNumber}}<strong> Remarks:</strong>{{form.containerTwoRemarksDispatch}}

</div>
<BR>	
<div>
<table cellpadding="0" cellspacing="0" border="0">
<tr><td><strong>Recipient Location:</td><td> {{form.instance.recipientLocation}}</td></tr>
<tr><td><strong>Consignee:</td><td>{{form.instance.recipientConsingee}}</td></tr>
<tr><td><strong>Receivers Name:</td><td>{{form.thisRecName}} - {{form.instance.recipientTitle}}</td></tr>
<tr><td><strong>Arrival Date: </td><td>{{form.recipientArrivalDate}}</td></tr>
<tr><td><strong>Start Discharge:</td><td>{{form.recipientStartDischargeDate}}</td></tr>
<tr><td><strong>End Discharge: </td><td>{{form.recipientEndDischargeDate}}</td></tr>
<tr><td><strong>Distance: </td><td>{{form.recipientDistance}}</td></tr>
</table>
</div>
<table>
<tr><td colspan="3"><strong>Recipient Remarks:</td><td colspan="3">{{form.recipientRemarks}}</td></tr>

<tr><td><strong>Container 1:</td><td></td><td><strong> Seal: </td><td>{{form.instance.containerOneSealNumber}}</td><td><strong> Remarks:</td><td>{{form.containerOneRemarksReciept}}</td></tr>
<tr><td><strong>Container 2:</td><td></td><td><strong> Seal: </td><td>{{form.instance.containerTwoSealNumber}}</td><td><strong> Remarks:</td><td>{{form.containerTwoRemarksReciept}}</td></tr>

</table>
<table>
	<tr>
		<td><input type="submit" value="Save & Exit"> {% csrf_token %}
</form></td><td>&nbsp;</td>
		<td><SCRIPT LANGUAGE="JavaScript">
      function confirmAction() {
        return confirm("Are you sure that you want to remove waybill {{form.instance.waybillNumber}}")
      }
</SCRIPT>
<form action="{%url ets.waybill.views.invalidate_waybill form.instance.id%}"  onSubmit="return confirmAction()">
<input type="submit" value="INVALIDATE"> 
</form></td>
	</tr>
</table>


</div>


{%endblock%}
{%block extra-header%}
<script charset="utf-8" type="text/javascript">


$(document).ready(function() {

				$('#id_recipientArrivalDate').datepicker({ dateFormat: 'yy-mm-dd' });
				$('#id_recipientStartDischargeDate').datepicker({ dateFormat: 'yy-mm-dd' });
				$('#id_recipientEndDischargeDate').datepicker({ dateFormat: 'yy-mm-dd' });
				$('#id_dateOfDispatch').datepicker({ dateFormat: 'yy-mm-dd' });
				$('#id_dateOfLoading').datepicker({ dateFormat: 'yy-mm-dd' });				
				$('#example').dataTable( {
					"bPaginate": false,
					"bLengthChange": false,
					"bFilter": false,
					"bSort": false,
					"bInfo": false,
					"bAutoWidth": true 
				});
} );

</script>
{%endblock extra-header%}
