{% extends "base_template.html"%}
{%block content %}
<h3>Submitted Received & Validated Waybills to Compas</h3>
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr><th>LTI</th><th>Waybill Number</th><th>Origin</th><th>Consignee</th><th>Delivery Location</th><th>Dispatch</th><th>Validated</th><th>Received</th><th>Validated</th><th>Compas Updated</th><th></th></tr>
        </thead>
{% for waybill in waybill_list%}

<tr>
             <td>{{waybill.ltiNumber}}</td>
             <td>{{waybill.waybillNumber}}</td>
             <td>{{waybill.loadingdetail_set.select_related.0.siNo.origin_loc_name}}</td>
             <td>{{waybill.loadingdetail_set.select_related.0.siNo.consegnee_name}}</td>
             <td>{{waybill.loadingdetail_set.select_related.0.siNo.destination_loc_name}}</td>
             <td>{%if waybill.dispatcherSigned%}{{waybill.transportDispachSignedTimestamp|date:"Y/m/d"}}{%else%}Pending{%endif%} </td>
             <td>{%if waybill.waybillValidated%}Y{%else%}N{%endif%}  </td>
             <td>{%if waybill.recipientSigned%}{{waybill.recipientSignedTimestamp|date:"Y/m/d"}}{%else%}Pending{%endif%} </td>
             <td>{%if waybill.waybillReceiptValidated%}Y{%else%}N{%endif%}  </td>
              <td>{%if waybill.waybillRecSentToCompas%}Y{%else%}N{%endif%} </td>
             <td>{%if profile.isDispatcher or profile.isCompasUser%}<a href='{%url ets.waybill.views.waybill_view waybill.id%}'>View Dispatch</a>{%endif%}
                     {%if profile.isReciever or profile.isCompasUser%} <a href='../viewwb_reception/{{waybill.id}}'>View Reciept</a>{%endif%}
                     {%if profile.isCompasUser%} <a href='../viewwb_reception_edit/{{waybill.id}}'>View Full</a>{%endif%}
             </td>
    </tr>
{% endfor%}
</table>
{%if error_message %}
<span>{{error_message}}
</span><br>
<span>{{error_message}}</span>
{%endif%}
<br>
{%endblock%}

{%block extra-header%}
<script charset="utf-8">
$(document).ready(function() {
                $('#example').dataTable( {
                "aoColumns": [ 
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            { "bSearchable": false},
        ]
                });
} );
</script>
{%endblock extra-header%}